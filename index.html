<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Orvex - Global Tap to Earn Adventure</title>
    
    <script src='//libtl.com/sdk.js' data-zone='10476542' data-sdk='show_10476542'></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- COPY PROTECTION & GLOBAL STYLES --- */
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            
            /* Anti-Copy / Anti-Select Styles */
            -webkit-user-select: none; /* Safari/Chrome */
            -moz-user-select: none;    /* Firefox */
            -ms-user-select: none;     /* IE/Edge */
            user-select: none;         /* Standard */
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }

        input, textarea {
            -webkit-user-select: text;
            user-select: text;
        }

        /* --- ADVANCED COSMIC GALAXY THEME --- */
        :root {
            --primary-bg: linear-gradient(135deg, #0c0c2e 0%, #1a1a3d 50%, #2d2d5f 100%);
            --secondary-bg: linear-gradient(135deg, #1e1e3f 0%, #2a2a5a 100%);
            --accent-primary: #00d4ff;
            --accent-secondary: #7c3aed;
            --accent-glow: #00d4ff;
            --card-bg: rgba(255, 255, 255, 0.05);
            --card-border: rgba(0, 212, 255, 0.2);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --text-muted: rgba(255, 255, 255, 0.6);
            --text-accent: #00d4ff;
            --btn-primary: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            --btn-secondary: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
            --btn-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --btn-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            --shadow-primary: 0 20px 40px rgba(0, 212, 255, 0.1);
            --shadow-glow: 0 0 20px rgba(0, 212, 255, 0.3);
            --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.3);
            --progress-bg: rgba(255, 255, 255, 0.1);
            --progress-fill: linear-gradient(90deg, #00d4ff, #7c3aed);
            --notification-success: linear-gradient(135deg, #10b981, #059669);
            --notification-info: linear-gradient(135deg, #00d4ff, #0099cc);
            --star-color: rgba(255, 255, 255, 0.8);
            --nebula-color: rgba(124, 58, 237, 0.1);
        }

        body.dark-theme {
            --primary-bg: linear-gradient(135deg, #000000 0%, #1a0000 50%, #2d0000 100%);
            --secondary-bg: linear-gradient(135deg, #0a0000 0%, #1a0000 100%);
            --accent-primary: #ff6b6b;
            --accent-secondary: #ffd93d;
            --accent-glow: #ff6b6b;
            --card-bg: rgba(0, 0, 0, 0.7);
            --glass-bg: rgba(0, 0, 0, 0.5);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.4);
            --text-accent: #ff6b6b;
            --btn-primary: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            --btn-secondary: linear-gradient(135deg, #ffd93d 0%, #fbbf24 100%);
            --shadow-primary: 0 20px 40px rgba(255, 107, 107, 0.1);
            --shadow-glow: 0 0 20px rgba(255, 107, 107, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: all 0.5s ease;
            cursor: default;
        }

        /* Cosmic Background Animation */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, var(--star-color), transparent),
                radial-gradient(2px 2px at 40px 70px, var(--star-color), transparent),
                radial-gradient(1px 1px at 90px 40px, var(--star-color), transparent),
                radial-gradient(1px 1px at 130px 80px, var(--star-color), transparent),
                radial-gradient(2px 2px at 160px 30px, var(--star-color), transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: stars 20s linear infinite;
            z-index: -2;
            opacity: 0.8;
            pointer-events: none;
        }

        @keyframes stars {
            from { transform: translateY(0px); }
            to { transform: translateY(-200px); }
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--nebula-color);
            animation: nebula 30s ease-in-out infinite;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes nebula {
            0%, 100% { opacity: 0.1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.1); }
        }

        .container { 
            max-width: 420px; 
            margin: auto; 
            padding: 50px 10px 100px 10px; 
            position: relative;
            z-index: 1;
        } 

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            padding: 10px 15px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--btn-primary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            color: white;
            box-shadow: var(--shadow-glow);
        }

        .theme-toggle-btn {
            width: 40px; 
            height: 40px; 
            border-radius: 50%;
            border: 2px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-card);
        }

        .theme-toggle-btn:hover { 
            transform: scale(1.1) rotate(180deg); 
            box-shadow: var(--shadow-glow);
            border-color: var(--accent-primary);
        }

        /* Page Transitions */
        .page { 
            display: none; 
            animation: slideInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
        }
        .page.active { display: block; }
        
        @keyframes slideInUp {
            from { 
                opacity: 0; 
                transform: translateY(50px) scale(0.95); 
            } 
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            } 
        }

        /* Premium Balance Card */
        .balance-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-card);
            text-align: center;
            border: 1px solid var(--card-border);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 3px;
            background: var(--progress-fill);
            border-radius: 20px 20px 0 0;
        }

        .balance-card::after {
            content: '';
            position: absolute;
            bottom: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.05) 0%, transparent 70%);
            animation: orbit 8s linear infinite;
            pointer-events: none;
        }

        @keyframes orbit {
            0% { transform: rotate(0deg) translateX(50px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(50px) rotate(-360deg); }
        }

        .balance-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-primary);
        }

        .balance-card h3 { 
            font-family: 'Orbitron', monospace;
            font-size: 12px; 
            text-transform: uppercase; 
            letter-spacing: 1.5px; 
            opacity: 0.8; 
            margin-bottom: 10px; 
            font-weight: 700;
            color: var(--text-accent);
        }

        .balance-card .amount { 
            font-family: 'Orbitron', monospace;
            font-size: 36px; 
            font-weight: 900; 
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
            text-shadow: none;
            animation: coinGlow 2s ease-in-out infinite alternate;
        }

        @keyframes coinGlow {
            from { filter: drop-shadow(0 0 10px var(--accent-glow)); }
            to { filter: drop-shadow(0 0 20px var(--accent-glow)); }
        }

        /* Main Cards */
        .main-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px 20px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-card);
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
            transition: all 0.4s ease;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), var(--accent-secondary), transparent);
        }

        .main-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), var(--accent-secondary), transparent);
        }

        .main-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-primary);
        }

        .main-card h2 { 
            font-family: 'Orbitron', monospace;
            font-size: 20px; 
            font-weight: 900; 
            margin-bottom: 15px; 
            position: relative;
            z-index: 1;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .reward-badge {
            display: inline-block;
            background: var(--btn-primary);
            padding: 10px 20px;
            border-radius: 40px;
            font-weight: 800;
            color: white;
            margin-bottom: 25px;
            box-shadow: var(--shadow-glow);
            position: relative;
            z-index: 1;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .reward-badge::before {
            content: 'üíé';
            margin-right: 6px;
            font-size: 16px;
        }

        .reward-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(0, 212, 255, 0.4);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 15px 10px;
            border-radius: 15px;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--progress-fill);
        }

        .stat-item:hover { 
            transform: translateY(-5px) scale(1.02); 
            box-shadow: var(--shadow-primary);
            border-color: var(--accent-primary);
        }

        .stat-item span { 
            display: block; 
            font-family: 'Orbitron', monospace;
            font-size: 24px; 
            font-weight: 900; 
            color: var(--accent-primary);
            margin-bottom: 5px;
        }

        .stat-item label { 
            font-size: 11px; 
            opacity: 0.7; 
            font-weight: 600; 
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Premium Buttons */
        .premium-btn {
            width: 100%;
            height: 60px;
            font-size: 18px;
            font-weight: 800;
            border: none;
            border-radius: 20px;
            color: white;
            background: var(--btn-primary);
            cursor: pointer;
            box-shadow: var(--shadow-primary);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            font-family: 'Orbitron', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 1;
        }

        .premium-btn::before {
            content: '';
            position: absolute;
            top: 0; 
            left: -100%;
            width: 100%; 
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
            z-index: -1;
        }

        .premium-btn:hover::before { 
            left: 100%; 
        }

        .premium-btn:hover { 
            transform: translateY(-3px) scale(1.02); 
            box-shadow: 0 25px 50px rgba(0, 212, 255, 0.3);
        }

        .premium-btn:active { 
            transform: scale(0.98); 
        }

        .premium-btn.loading { 
            background: var(--btn-secondary); 
            opacity: 0.8; 
            cursor: not-allowed;
            transform: none;
        }

        .premium-btn.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid transparent;
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Progress Bar */
        .progress-container {
            height: 10px;
            background: var(--progress-bg);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
            border: 1px solid var(--glass-border);
        }

        .progress-fill {
            height: 100%;
            background: var(--progress-fill);
            width: 0%;
            transition: 1s width cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            border-radius: 8px;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0; 
            left: 0;
            bottom: 0; 
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            animation: shimmer 2s infinite;
        }

        .progress-fill::before {
            content: attr(data-label);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 9px;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            z-index: 2;
        }

        /* City Section */
        .city-section {
            text-align: center;
            margin-bottom: 25px;
        }

        .city-title {
            font-family: 'Orbitron', monospace;
            font-size: 20px;
            font-weight: 900;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .city-description {
            font-size: 13px;
            opacity: 0.8;
            margin-bottom: 20px;
            color: var(--text-muted);
        }

        .upgrade-container {
            position: relative;
            display: inline-block;
            margin: 15px 0;
        }

        .upgrade-box {
            width: 140px; 
            height: 140px; 
            background: var(--btn-primary);
            margin: 15px auto;
            border-radius: 50%;
            border: 3px solid var(--accent-primary);
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 70px;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-glow), inset 0 0 20px rgba(255,255,255,0.1);
        }

        .upgrade-box::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 90px;
            height: 90px;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .upgrade-box:hover::before {
            opacity: 1;
        }

        .upgrade-box:hover { 
            transform: scale(1.1) rotateY(360deg); 
            box-shadow: 0 0 40px rgba(0, 212, 255, 0.5);
            border-color: var(--accent-secondary);
        }

        .upgrade-box.upgraded { 
            animation: upgradeSuccess 1s cubic-bezier(0.68, -0.55, 0.265, 1.55); 
            background: var(--btn-success);
            border-color: #10b981;
        }

        @keyframes upgradeSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.3) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        .upgrade-info {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            margin-bottom: 15px;
            font-weight: 700;
            font-size: 13px;
        }

        .upgrade-info span {
            color: var(--accent-primary);
            font-family: 'Orbitron', monospace;
        }

        /* Tasks Section */
        .tasks-header {
            font-family: 'Orbitron', monospace;
            font-size: 20px;
            font-weight: 900;
            margin: 0 0 20px 0;
            text-align: left;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .task-list { 
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
        }

        .task-card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid var(--card-border);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .task-card::before {
            content: '';
            position: absolute;
            left: 0; 
            top: 0; 
            bottom: 0;
            width: 5px;
            background: var(--progress-fill);
            border-radius: 15px 0 0 15px;
        }

        .task-card:hover { 
            transform: translateX(10px) scale(1.02); 
            box-shadow: var(--shadow-primary);
            border-color: var(--accent-primary);
        }

        .task-info { 
            text-align: left; 
            flex: 1; 
            position: relative; 
            z-index: 1; 
        }

        .task-info h3 { 
            font-size: 16px; 
            margin-bottom: 6px; 
            font-weight: 700; 
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .task-info .reward { 
            color: var(--accent-primary); 
            font-weight: 800; 
            font-size: 14px; 
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
        }

        .task-action-btn {
            padding: 10px 15px;
            border-radius: 12px;
            border: none;
            font-weight: 700;
            background: var(--btn-primary);
            color: white;
            cursor: pointer;
            min-width: 90px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-primary);
            position: relative;
            overflow: hidden;
            font-family: 'Orbitron', monospace;
            font-size: 13px;
            text-transform: uppercase;
        }

        .task-action-btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.3);
        }

        .task-action-btn:active { 
            transform: scale(0.98); 
        }

        /* COMPLETED STATE - Applied strictly to overrides */
        .task-action-btn.completed { 
            background: var(--btn-success) !important; 
            cursor: default !important; 
            transform: none !important;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3) !important;
            color: white !important;
            opacity: 1 !important;
        }

        .task-action-btn.completed:hover { 
            transform: none !important; 
        }

        .task-action-btn.disabled { 
            opacity: 0.5; 
            cursor: not-allowed; 
            background: var(--btn-warning);
            transform: none;
        }

        .task-action-btn.disabled:hover { 
            transform: none; 
        }

        /* Roadmap Section */
        .roadmap-header {
            font-family: 'Orbitron', monospace;
            font-size: 20px;
            font-weight: 900;
            margin: 0 0 20px 0;
            text-align: left;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .roadmap-item {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-left: 5px solid var(--accent-primary);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--card-border);
        }

        .roadmap-item::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1));
            transition: width 0.5s ease;
        }

        .roadmap-item:hover::before {
            width: 100%;
        }

        .roadmap-item:hover { 
            transform: translateY(-8px); 
            box-shadow: var(--shadow-primary);
            border-left-color: var(--accent-secondary);
        }

        .roadmap-date {
            font-family: 'Orbitron', monospace;
            font-weight: 900; 
            color: var(--accent-primary);
            font-size: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .roadmap-item h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .roadmap-item p {
            font-size: 13px; 
            opacity: 0.8; 
            line-height: 1.5;
            color: var(--text-secondary);
        }

        /* Navigation */
        .navigation {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 400px;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            display: flex;
            padding: 10px;
            border-radius: 25px;
            box-shadow: var(--shadow-card);
            z-index: 1000;
            border: 1px solid var(--glass-border);
            gap: 6px;
        }

        .nav-item {
            flex: 1;
            border: none;
            background: transparent;
            color: var(--text-muted);
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: var(--progress-fill);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
            border-radius: 15px;
        }

        .nav-item:hover::before { 
            opacity: 0.2; 
        }

        .nav-item:hover { 
            color: var(--accent-primary); 
            transform: translateY(-3px);
        }

        .nav-item.active { 
            color: var(--accent-primary); 
            background: rgba(0, 212, 255, 0.1);
        }

        .nav-item.active::before { 
            opacity: 0.3; 
        }

        .nav-icon { 
            font-size: 22px; 
            margin-bottom: 4px; 
            transition: transform 0.3s ease;
        }

        .nav-item:hover .nav-icon {
            transform: scale(1.2);
        }

        .nav-item.active .nav-icon {
            transform: scale(1.1);
        }

        /* Notification */
        #notification {
            position: fixed;
            top: 60px; /* Moved down to avoid header clash */
            left: 50%; 
            transform: translateX(-50%) translateY(-100px);
            background: var(--notification-info);
            color: white; 
            padding: 12px 30px; 
            border-radius: 40px;
            font-weight: 700; 
            z-index: 10001; 
            transition: all 0.6s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            box-shadow: var(--shadow-primary);
            max-width: 85%;
            text-align: center;
            font-family: 'Orbitron', monospace;
            font-size: 13px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .notification-show { 
            transform: translateX(-50%) translateY(0) !important; 
            animation: notificationPop 0.3s ease;
        }

        @keyframes notificationPop {
            0% { transform: translateX(-50%) translateY(-100px) scale(0.8); opacity: 0; }
            100% { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }
        }

        .notification-hide {
            transform: translateX(-50%) translateY(-100px) !important;
            opacity: 0;
        }

        /* Reward Popup */
        .reward-popup {
            position: fixed;
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white; 
            padding: 20px 40px;
            border-radius: 20px; 
            font-weight: 900; 
            font-size: 24px;
            opacity: 0; 
            z-index: 10002; 
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: var(--shadow-primary);
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.2);
            font-family: 'Orbitron', monospace;
        }

        .reward-popup.show { 
            opacity: 1; 
            transform: translate(-50%, -50%) scale(1); 
            animation: rewardExplode 0.6s ease;
        }

        @keyframes rewardExplode {
            0% { 
                transform: translate(-50%, -50%) scale(0) rotate(0deg); 
                opacity: 0; 
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.2) rotate(5deg); 
                opacity: 1; 
            }
            100% { 
                transform: translate(-50%, -50%) scale(1) rotate(0deg); 
                opacity: 1; 
            }
        }

        .reward-popup::before {
            content: '‚ú®';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 35px;
            animation: sparkle 1.5s ease-out;
        }

        .reward-popup::after {
            content: 'üéâ';
            position: absolute;
            bottom: -12px;
            right: 15px;
            font-size: 25px;
            animation: celebrate 2s ease-in-out infinite;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.7; }
            50% { transform: scale(1.2) rotate(10deg); opacity: 1; }
        }

        @keyframes sparkle {
            0% { opacity: 0; transform: translateX(-50%) translateY(-30px) scale(0) rotate(0deg); }
            50% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1.5) rotate(180deg); }
            100% { opacity: 0; transform: translateX(-50%) translateY(30px) scale(0) rotate(360deg); }
        }

        /* Splash Screen */
        #splashScreen {
            position: fixed; 
            inset: 0; 
            background: var(--primary-bg);
            z-index: 99999; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            transition: opacity 0.8s ease;
        }

        .splash-title { 
            font-family: 'Orbitron', monospace;
            font-size: 50px; 
            font-weight: 900; 
            color: var(--accent-primary);
            margin-bottom: 25px;
            animation: epicEntrance 2s ease-out;
            text-shadow: 0 0 30px var(--accent-glow);
            letter-spacing: 4px;
        }

        @keyframes epicEntrance {
            0% { 
                opacity: 0; 
                transform: scale(0.5) rotateX(90deg) translateY(100px); 
            }
            50% { 
                opacity: 1; 
                transform: scale(1.1) rotateX(0deg) translateY(0); 
            }
            100% { 
                opacity: 1; 
                transform: scale(1) rotateX(0deg) translateY(0); 
            }
        }

        .splash-loader {
            width: 200px; 
            height: 6px; 
            background: rgba(255,255,255,0.1); 
            border-radius: 8px; 
            overflow: hidden; 
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
            position: relative;
        }

        .splash-fill { 
            height: 100%; 
            width: 0%; 
            background: var(--progress-fill);
            animation: loadProgress 3.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            position: relative;
            border-radius: 6px;
        }

        .splash-fill::after {
            content: '';
            position: absolute;
            top: 0; 
            left: 0; 
            bottom: 0;
            width: 35px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.9), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes loadProgress { 
            to { width: 100%; } 
        }

        .splash-subtitle {
            margin-top: 15px;
            font-size: 14px;
            color: var(--text-muted);
            animation: fadeInUp 1s ease-out 1s both;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Status Messages */
        .status-message {
            margin-top: 12px;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
        }

        .status-message.error {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .status-message.success {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .container { padding: 50px 8px 100px 8px; }
            .navigation { width: 95%; bottom: 10px; padding: 8px; }
            .splash-title { font-size: 40px; letter-spacing: 2px; }
            .stats-grid { gap: 12px; }
            .main-card { padding: 20px 15px; }
            .task-card { padding: 15px; }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 5px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }
    </style>
</head>
<body id="body">

    <div id="splashScreen">
        <div class="splash-title">ORVEX</div>
        <div class="splash-subtitle">Global Tap to Earn Adventure</div>
        <div class="splash-loader">
            <div class="splash-fill"></div>
        </div>
    </div>

    <div id="notification">
        <span id="notificationText"></span>
    </div>

    <div id="rewardMsg" class="reward-popup"></div>

    <div class="container">
        <div class="header">
            <div class="status-indicator">
                <i class="fas fa-signal"></i>
                <span>Online</span>
            </div>
            <button class="theme-toggle-btn" onclick="toggleTheme()">
                <span id="themeIcon">üîÜ</span>
            </button>
        </div>

        <div id="homePage" class="page active">
            <div class="balance-card">
                <h3>Total Balance</h3>
                <div class="amount"><span id="balance">0</span> ORVEX</div>
            </div>
            
            <div class="main-card">
                <h2><i class="fas fa-play-circle"></i> Global Earnings</h2>
                <div class="reward-badge">+<span id="currentAdReward">100</span> ORVEX per Ad</div>
                
                <div class="stats-grid">
                    <div class="stat-item">
                        <span id="adsCount">0</span>
                        <label>Ads Watched</label>
                    </div>
                    <div class="stat-item">
                        <span id="maxAds">100</span>
                        <label>Daily Limit</label>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-fill" id="progress"></div>
                </div>

                <button id="adBtn" class="premium-btn">
                    <span id="adBtnText">Watch Ad</span>
                </button>
            </div>
        </div>

        <div id="cityPage" class="page">
            <div class="balance-card">
                <h3>Total Balance</h3>
                <div class="amount"><span id="balanceCity">0</span> ORVEX</div>
            </div>

            <div class="main-card">
                <div class="city-section">
                    <h2 class="city-title">üèôÔ∏è City Upgrade</h2>
                    <p class="city-description">Build your empire and boost earnings up to 5x globally. New levels coming soon! Levels and ad watches are crucial for airdrop rewards.</p>
                    
                    <div class="upgrade-container">
                        <div class="upgrade-box" id="upgradeBox">üèôÔ∏è</div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span id="levelDisplay">1</span>
                            <label>Level</label>
                        </div>
                        <div class="stat-item">
                            <span id="boostDisplay">1.0x</span>
                            <label>Global Boost</label>
                        </div>
                    </div>

                    <div class="upgrade-info">
                        Upgrade Cost: <span id="upgradeCostDisplay">500 ORVEX</span>
                    </div>

                    <button id="upgradeBtn" class="premium-btn">Build City</button>
                    <div id="upgradeStatusMessage" class="status-message"></div>
                </div>
            </div>
        </div>

        <div id="tasksPage" class="page">
            <div class="balance-card">
                <h3>Total Balance</h3>
                <div class="amount"><span id="balanceTasks">0</span> ORVEX</div>
            </div>

            <h2 class="tasks-header">
                <i class="fas fa-trophy"></i> Global Missions
            </h2>
            
            <div class="task-list">
                <div class="task-card">
                    <div class="task-info">
                        <h3><i class="fab fa-telegram"></i> Join Global Community</h3>
                        <div class="reward"><i class="fas fa-coins"></i> +5,000 ORVEX</div>
                    </div>
                    <button id="joinChannelBtn" class="task-action-btn">Join Now</button>
                </div>

                <div class="task-card">
                    <div class="task-info">
                        <h3><i class="fas fa-building"></i> City Level 5</h3>
                        <div class="reward"><i class="fas fa-gem"></i> +2,500 ORVEX</div>
                    </div>
                    <button id="claimLevel5Btn" class="task-action-btn disabled">Locked</button>
                </div>

                <div class="task-card">
                    <div class="task-info">
                        <h3><i class="fas fa-building"></i> City Level 10</h3>
                        <div class="reward"><i class="fas fa-gem"></i> +5,000 ORVEX</div>
                    </div>
                    <button id="claimLevel10Btn" class="task-action-btn disabled">Locked</button>
                </div>

                <div class="task-card">
                    <div class="task-info">
                        <h3><i class="fas fa-building"></i> City Level 25</h3>
                        <div class="reward"><i class="fas fa-gem"></i> +10,000 ORVEX</div>
                    </div>
                    <button id="claimLevel25Btn" class="task-action-btn disabled">Locked</button>
                </div>

                <div class="task-card">
                    <div class="task-info">
                        <h3><i class="fas fa-building"></i> City Level 50</h3>
                        <div class="reward"><i class="fas fa-gem"></i> +25,000 ORVEX</div>
                    </div>
                    <button id="claimLevel50Btn" class="task-action-btn disabled">Locked</button>
                </div>

                <div class="task-card">
                    <div class="task-info">
                        <h3><i class="fas fa-building"></i> City Level 100</h3>
                        <div class="reward"><i class="fas fa-gem"></i> +50,000 ORVEX</div>
                    </div>
                    <button id="claimLevel100Btn" class="task-action-btn disabled">Locked</button>
                </div>
            </div>
        </div>

        <div id="listingPage" class="page">
            <div class="balance-card">
                <h3>Total Balance</h3>
                <div class="amount"><span id="balanceListing">0</span> ORVEX</div>
            </div>
            
            <h2 class="roadmap-header">
                <i class="fas fa-rocket"></i> Global Roadmap 2026
            </h2>
            
            <div class="roadmap-item">
                <div class="roadmap-date">
                    <i class="fas fa-calendar-alt"></i> Q2 2026
                </div>
                <h3>üåå Token Generation Event</h3>
                <p>Global airdrop distribution to active players based on achievements, balance, and community contribution. Multiple CEX listings worldwide.</p>
            </div>

            <div class="roadmap-item">
                <div class="roadmap-date">
                    <i class="fas fa-calendar-alt"></i> Q3 2026
                </div>
                <h3>üöÄ Global Exchange Listing</h3>
                <p>Strategic partnerships with Binance, OKX, Bybit, and major regional exchanges. Liquidity pools and staking programs launch globally.</p>
            </div>

            <div class="roadmap-item">
                <div class="roadmap-date">
                    <i class="fas fa-calendar-alt"></i> Q4 2026
                </div>
                <h3>üåç Global Expansion</h3>
                <p>Mobile app launch, NFT marketplace integration, and metaverse city development. Community governance and DAO implementation.</p>
            </div>
        </div>
    </div>

    <div class="navigation">
        <button onclick="showPage('homePage', this)" class="nav-item active">
            <span class="nav-icon"><i class="fas fa-home"></i></span>
            <span>Home</span>
        </button>
        <button onclick="showPage('cityPage', this)" class="nav-item">
            <span class="nav-icon"><i class="fas fa-city"></i></span>
            <span>City</span>
        </button>
        <button onclick="showPage('tasksPage', this)" class="nav-item">
            <span class="nav-icon"><i class="fas fa-tasks"></i></span>
            <span>Missions</span>
        </button>
        <button onclick="showPage('listingPage', this)" class="nav-item">
            <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
            <span>Roadmap</span>
        </button>
    </div>

    <script>
        // --- SECURITY & ANTI-COPY SYSTEM ---
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('selectstart', event => event.preventDefault());
        document.addEventListener('dragstart', event => event.preventDefault());
        
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'c' || e.key === 'C')) {
                e.preventDefault();
            }
        });

        // --- ADVANCED DATA STORAGE ---
        function safeGet(k, d = 0) { 
            try { 
                const item = localStorage.getItem(k);
                return item ? JSON.parse(item) : d; 
            } catch(e) { 
                console.warn(`Failed to get ${k} from storage`);
                return d; 
            } 
        }

        function safeSet(k, v) { 
            try { 
                localStorage.setItem(k, JSON.stringify(v)); 
                return true;
            } catch(e) { 
                console.warn(`Failed to set ${k} in storage`);
                return false;
            } 
        }

        // --- ADVANCED DAILY RESET SYSTEM AT 21:00 UTC ---
        function getDayKey() {
            const now = Date.now() / 1000; // seconds
            const offset = 21 * 3600; // 21:00 in seconds
            return Math.floor((now - offset) / 86400);
        }

        function resetDaily() {
            const currentKey = getDayKey();
            const lastKey = safeGet('lastDayKey', -1);
            if (currentKey > lastKey) {
                adCount = 0;
                safeSet('adCount', 0);
                safeSet('lastDayKey', currentKey);
                showNotification("üåü Daily ad limit reset at 21:00 UTC!", 2000);
                updateUI();
            }
            setTimeout(resetDaily, 60000); // Check every minute
        }

        // --- GLOBAL GAME STATE ---
        let coins = parseFloat(safeGet('coins', 0)) || 0;
        let adCount = parseInt(safeGet('adCount', 0)) || 0;
        let upgradeLevel = Math.max(1, parseInt(safeGet('upgradeLevel', 1)) || 1);
        let channelJoined = safeGet('channelJoined', false);
        let isInitialized = false;

        let milestones = {
            5: safeGet('level5Claimed', false),
            10: safeGet('level10Claimed', false),
            25: safeGet('level25Claimed', false),
            50: safeGet('level50Claimed', false),
            100: safeGet('level100Claimed', false)
        };

        const BASE_REWARD = 100;
        const CHANNEL_REWARD = 5000;
        const MAX_ADS = 100;
        const MAX_LEVEL = 100;
        const BOOST_PER_LEVEL = 0.05; 
        const MAX_BOOST = 5.0; 

        // --- ADVANCED CALCULATION FUNCTIONS ---
        function getBoost() { 
            return Math.min(1 + (upgradeLevel * BOOST_PER_LEVEL), MAX_BOOST); 
        }

        function getNextCost() { 
            return Math.floor(500 * Math.pow(1.05, upgradeLevel - 1)); 
        }

        function formatNumber(num) {
            if (num >= 1e6) return (num / 1e6).toFixed(1) + 'M';
            if (num >= 1e3) return (num / 1e3).toFixed(1) + 'K';
            return num.toLocaleString();
        }

        // --- PREMIUM THEME SYSTEM ---
        function toggleTheme() {
            const isDark = document.body.classList.toggle('dark-theme');
            const icon = document.getElementById('themeIcon');
            icon.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
            safeSet('theme', isDark ? 'dark' : 'light');
            
            document.body.style.transition = 'all 0.6s ease';
            setTimeout(() => {
                document.body.style.transition = '';
            }, 600);
            
            showNotification(isDark ? 'üåô Dark Mode Activated' : '‚òÄÔ∏è Light Mode Activated');
        }

        (function() {
            const savedTheme = safeGet('theme', 'light');
            if (savedTheme === 'dark') {
                toggleTheme();
            }
        })();

        // --- ENHANCED UI UPDATE SYSTEM ---
        function updateUI() {
            const currentBoost = getBoost();
            const rewardPerAd = Math.floor(BASE_REWARD * currentBoost);

            // Update all balance displays uniformly
            const balanceElements = ['balance', 'balanceCity', 'balanceTasks', 'balanceListing'];
            balanceElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = formatNumber(Math.floor(coins));
                }
            });

            const adsCountEl = document.getElementById('adsCount');
            const progressEl = document.getElementById('progress');
            const rewardEl = document.getElementById('currentAdReward');
            
            if (adsCountEl) adsCountEl.textContent = adCount;
            if (progressEl) {
                const percentage = Math.min((adCount / MAX_ADS) * 100, 100);
                progressEl.style.width = percentage + '%';
                progressEl.setAttribute('data-label', Math.floor(percentage) + '%');
            }
            if (rewardEl) rewardEl.textContent = formatNumber(rewardPerAd);

            const levelEl = document.getElementById('levelDisplay');
            const boostEl = document.getElementById('boostDisplay');
            const costEl = document.getElementById('upgradeCostDisplay');
            
            if (levelEl) levelEl.textContent = upgradeLevel;
            if (boostEl) boostEl.textContent = currentBoost.toFixed(2) + 'x';
            if (costEl) costEl.textContent = formatNumber(getNextCost()) + ' ORVEX';

            updateTaskButtons();

            safeSet('coins', coins);
            safeSet('adCount', adCount);
            safeSet('upgradeLevel', upgradeLevel);
            safeSet('channelJoined', channelJoined);
            
            Object.keys(milestones).forEach(lvl => {
                safeSet(`level${lvl}Claimed`, milestones[lvl]);
            });

            isInitialized = true;
        }

        function updateTaskButtons() {
            const joinBtn = document.getElementById('joinChannelBtn');
            if (joinBtn) {
                if (channelJoined) {
                    joinBtn.textContent = 'Claimed ‚úì';
                    joinBtn.className = 'task-action-btn completed'; // Reset classes to ensure consistency
                    joinBtn.disabled = true;
                }
            }

            const milestoneRewards = {5: 2500, 10: 5000, 25: 10000, 50: 25000, 100: 50000};
            Object.keys(milestoneRewards).forEach(lvl => {
                const btn = document.getElementById(`claimLevel${lvl}Btn`);
                if (!btn) return;

                if (milestones[lvl]) {
                    btn.textContent = 'Claimed ‚úì';
                    btn.className = 'task-action-btn completed'; // Ensure identical class string
                    btn.disabled = true;
                } else if (upgradeLevel >= parseInt(lvl)) {
                    btn.textContent = 'Claim Now';
                    btn.className = 'task-action-btn'; // Clean class for active state
                    btn.disabled = false;
                } else {
                    btn.textContent = 'Level ' + lvl + ' Required';
                    btn.className = 'task-action-btn disabled';
                    btn.disabled = true;
                }
            });
        }

        // --- NOTIFICATION SYSTEM (Used only for errors/alerts now) ---
        function showNotification(msg, duration = 2000, type = 'info') { 
            const notificationEl = document.getElementById('notification');
            const textEl = document.getElementById('notificationText');
            
            if (!notificationEl || !textEl) return;

            if (window.notificationTimeout) {
                clearTimeout(window.notificationTimeout);
                window.notificationTimeout = null;
            }

            textEl.textContent = msg;
            notificationEl.style.background = type === 'success' ? 'var(--notification-success)' : 'var(--notification-info)';
            
            notificationEl.classList.remove('notification-hide');
            notificationEl.classList.add('notification-show');

            window.notificationTimeout = setTimeout(() => {
                notificationEl.classList.remove('notification-show');
                notificationEl.classList.add('notification-hide');
            }, duration);
        }

        // --- ENHANCED REWARD SYSTEM (CENTER POPUP) ---
        function showRewardPopup(amount) {
            const popupEl = document.getElementById('rewardMsg');
            if (!popupEl) return;

            const formattedAmount = formatNumber(amount);
            popupEl.textContent = `+${formattedAmount} ORVEX`;

            if (window.rewardTimeout) {
                clearTimeout(window.rewardTimeout);
            }

            popupEl.classList.add('show');
            
            window.rewardTimeout = setTimeout(() => {
                popupEl.classList.remove('show');
            }, 2000); 

            if (window.Notification && Notification.permission === 'granted') {
                new Notification('ORVEX Reward', {
                    body: `You earned ${formattedAmount} ORVEX!`,
                    icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%2300d4ff"/></svg>'
                });
            }
        }

        // --- MONETAG SDK INTEGRATION ---
        let isWatchingAd = false;
        
        function showMonetagAd() {
            return new Promise((resolve) => {
                if (typeof show_10476542 === 'function') {
                    show_10476542().then(() => {
                        resolve(true); 
                    }).catch(e => {
                        console.error('Ad Error (Silent):', e);
                        resolve(false); 
                    });
                } else {
                    console.warn("SDK not loaded");
                    resolve(false); 
                }
            });
        }

        // --- PREMIUM AD WATCHING SYSTEM ---
        document.addEventListener('DOMContentLoaded', function() {
            const adBtn = document.getElementById('adBtn');
            if (adBtn) {
                adBtn.onclick = async function() {
                    const btn = this;
                    const btnText = document.getElementById('adBtnText');
                    
                    if (adCount >= MAX_ADS) {
                        showNotification("üéØ Daily limit reached! Check back tomorrow.", 2000);
                        btnText.textContent = 'Daily Limit';
                        return;
                    }
                    
                    if (isWatchingAd) return;

                    try {
                        isWatchingAd = true;
                        
                        btnText.textContent = 'Watching...';
                        btn.disabled = true; 

                        const adCompleted = await showMonetagAd();
                        
                        if (adCompleted) {
                            const reward = Math.floor(BASE_REWARD * getBoost());
                            coins += reward;
                            adCount = Math.min(adCount + 1, MAX_ADS);
                            
                            updateUI();
                            
                            showRewardPopup(reward);
                            
                            if (adCount >= MAX_ADS) {
                                setTimeout(() => {
                                    showNotification("üèÜ You Have Reached Your Daily Limit!", 2000, 'success');
                                    btnText.textContent = 'Daily Limit! üéâ';
                                }, 1000);
                            }
                            
                            checkMilestoneUnlocks();
                            
                        }
                        
                    } catch (error) {
                        console.error('Ad session error:', error);
                    } finally {
                        isWatchingAd = false;
                        if (adCount < MAX_ADS) {
                            btnText.textContent = 'Watch Ad';
                            btn.disabled = false;
                        }
                    }
                };
            }
        });

        // --- ADVANCED CITY UPGRADE SYSTEM ---
        document.addEventListener('DOMContentLoaded', function() {
            const upgradeBtn = document.getElementById('upgradeBtn');
            if (upgradeBtn) {
                upgradeBtn.onclick = function() {
                    const cost = getNextCost();
                    const statusMsg = document.getElementById('upgradeStatusMessage');
                    
                    if (coins < cost) {
                        if (statusMsg) {
                            statusMsg.textContent = `Insufficient funds. Need ${formatNumber(cost)} ORVEX`;
                            statusMsg.className = 'status-message error';
                        }
                        showNotification("üí∞ Not enough ORVEX!", 2000);
                        return;
                    }
                    
                    coins -= cost;
                    upgradeLevel = Math.min(upgradeLevel + 1, MAX_LEVEL);
                    
                    const upgradeBox = document.getElementById('upgradeBox');
                    if (upgradeBox) {
                        upgradeBox.classList.add('upgraded');
                        setTimeout(() => upgradeBox.classList.remove('upgraded'), 1000);
                    }
                    
                    updateUI();
                    
                    if (statusMsg) {
                        statusMsg.textContent = `City upgraded to Level ${upgradeLevel}!`;
                        statusMsg.className = 'status-message success';
                        setTimeout(() => {
                            statusMsg.textContent = '';
                            statusMsg.className = '';
                        }, 2000);
                    }
                    
                    showNotification(`üèôÔ∏è City upgraded to Level ${upgradeLevel}!`, 2000, 'success');
                    
                    checkMilestoneUnlocks();
                };
            }
        });

        // --- GLOBAL COMMUNITY TASK ---
        document.addEventListener('DOMContentLoaded', function() {
            const joinBtn = document.getElementById('joinChannelBtn');
            if (joinBtn) {
                joinBtn.onclick = function() {
                    if (channelJoined) return;
                    
                    const btn = this;
                    btn.textContent = 'Joining Community...';
                    btn.disabled = true;
                    
                    window.open('https://t.me/orvexapp', '_blank');
                    
                    setTimeout(() => {
                        coins += CHANNEL_REWARD;
                        channelJoined = true;
                        
                        updateUI(); // This calls updateTaskButtons which handles the class change
                        
                        showRewardPopup(CHANNEL_REWARD);
                        
                    }, 5000); 
                };
            }
        });

        // --- ADVANCED MILESTONE SYSTEM ---
        const milestoneRewards = {5: 2500, 10: 5000, 25: 10000, 50: 25000, 100: 50000};
        
        document.addEventListener('DOMContentLoaded', function() {
            Object.keys(milestoneRewards).forEach(lvl => {
                const btn = document.getElementById(`claimLevel${lvl}Btn`);
                if (btn) {
                    btn.onclick = function() {
                        const level = parseInt(lvl);
                        if (milestones[lvl] || upgradeLevel < level) {
                            showNotification("‚ùå Milestone not yet available.", 2000);
                            return;
                        }
                        
                        const reward = milestoneRewards[lvl];
                        coins += reward;
                        milestones[lvl] = true;
                        
                        updateUI(); // This handles the visual update
                        
                        showRewardPopup(reward);
                    };
                }
            });
        });

        function checkMilestoneUnlocks() {
            Object.keys(milestoneRewards).forEach(lvl => {
                if (upgradeLevel >= parseInt(lvl) && !milestones[lvl]) {
                    showNotification(`üèÜ One task completed: Level ${lvl}!`, 2000);
                }
            });
        }

        // --- PREMIUM NAVIGATION SYSTEM ---
        function showPage(pageId, btnElement) {
            const notification = document.getElementById('notification');
            if (notification && notification.classList.contains('notification-show')) {
                notification.classList.remove('notification-show');
                notification.classList.add('notification-hide');
            }
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
            });
            
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            if (btnElement) {
                btnElement.classList.add('active');
            }
            
            if (pageId === 'homePage') {
                updateUI();
            } else if (pageId === 'tasksPage') {
                updateTaskButtons();
            }
        }

        // --- INITIALIZATION & LIFE CYCLE ---
        function initializeApp() {
            resetDaily();
            updateUI();
            console.log('üåü ORVEX Global App Initialized Successfully');
        }

        setTimeout(() => {
            const splashScreen = document.getElementById('splashScreen');
            if (splashScreen) {
                splashScreen.style.opacity = '0';
                splashScreen.style.transform = 'scale(0.8)';
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                    initializeApp();
                }, 800);
            }
        }, 4000);

        setInterval(() => {
            if (isInitialized) {
                safeSet('coins', coins);
                safeSet('adCount', adCount);
                safeSet('upgradeLevel', upgradeLevel);
                safeSet('channelJoined', channelJoined);
            }
        }, 30000);

        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && isInitialized) {
                resetDaily();
                updateUI();
            }
        });

        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
        });

        window.addEventListener('beforeunload', function(e) {
            safeSet('coins', coins);
            safeSet('adCount', adCount);
            safeSet('upgradeLevel', upgradeLevel);
        });

        console.log('üåü ORVEX Global - Premium Edition Loaded');
    </script>
</body>
</html>
